<div class="row">
  <div class="card offset-3 col-6 shadow-lg mt-5">
    <div class="row">
      <div class="mt-3 ms-2 col-5 fw-bolder">
        <%= @knowledge.title %>
        <% if current_user.favorite?(@knowledge) %>
          <%= link_to 'ãƒ¼ðŸ–¤ï¸', favorite_path(current_user.favorites.find_by(knowledge_id: @knowledge.id)),id: "js-bookmark-button-for-knowledge-#{@knowledge.id}", data: { turbo_method: :delete }, class: "text-decoration-none" %>
        <% else %>
          <%= link_to 'ï¼‹â¤ï¸', favorites_path(knowledge_id: @knowledge.id), id: "js-bookmark-button-for-knowledge-#{@knowledge.id}", data: { turbo_method: :post }, class: "text-decoration-none" %>
        <% end %>
      </div>
      <div class="mt-3 text-end col-7 fw-light text-secondary"><span class="position-absolute top-0 end-0 mt-3 me-4"><%= @knowledge.category.category_name %></span></div>
      <div class="mt-3"><%= @knowledge.body %></div>
      <div class="mt-3 mb-4"><%= raw Rinku.auto_link(@knowledge.url, :all, 'target="_blank"') %></div>
      <div class="text-end text-secondary"><%= @knowledge.created_at.strftime('%Y/%m/%d %H:%M') %></div>
      <% if @knowledge.user.id != current_user.id %>
        <div class="text-end mt-1 mb-2"><%= link_to @knowledge.user.name, user_path(@knowledge.user.id), class: "text-decoration-none" %>
          <% if current_user.following?(@knowledge.user) %>
            <span class="mb-2"><%= link_to "ãƒ¼", user_relationship_path(@knowledge.user.id), data: { turbo_method: :delete, turbo_confirm: "ãƒ•ã‚©ãƒ­ãƒ¼å¤–ã—ã¾ã™ã‹?" }, class: "btn btn-outline-primary btn-sm" %></span>
          <% else %>
            <span class="mb-2"><%= link_to "ï¼‹", user_relationships_path(@knowledge.user.id), data: { turbo_method: :post }, class: "btn btn-outline-primary btn-sm" %></span>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
  <% if @knowledge.user == current_user %>
    <div class="card offset-2 col-8 shadow-lg mt-3 mb-5">
      <div class="text-danger text-center mt-4">
        <%= render "layouts/error_messages", model: @knowledge %>
      </div>
      <%= form_with model: @knowledge, local: true do |f| %>
        <div class="row">
          <div class="offset-2 col-8 mt-3">
            <%= f.label :title, "ã‚¿ã‚¤ãƒˆãƒ«", class: "form-label" %><br>
            <%= f.text_field :title, class: "form-control" %>
          </div>
        
          <div class="offset-2 col-8 mt-2">
            <%= f.label :body, "æœ¬æ–‡", class: "form-label" %><br>
            <%= f.text_area :body, class: "form-control", rows: 4 %>
          </div>
          
          <div class="offset-2 col-8 mt-2">
            <%= f.label :url, "URL", class: "form-label" %><br>
            <%= f.text_area :url, class: "form-control", rows: 3 %>
          </div>
          
          <div class="offset-2 col-8 mt-2">
            <%= f.label :category_id, "ã‚«ãƒ†ã‚´ãƒªãƒ¼", class: "form-label" %><br>
            <%= f.collection_select :category_id, Category.all, :id, :category_name, { prompt: 'é¸æŠžã—ã¦ãã ã•ã„' }, class: "form-select" %>
          </div>
          
          <div class="mt-3 mb-2 text-center">
            <%= f.submit "Edit", class: "btn btn-outline-success col-3" %>
          </div>
        </div>
      <% end %>
      <div class="text-center mt-2 mb-5">
        <%= link_to "Delete", knowledge_path(@knowledge.id), data: { turbo_method: :delete, turbo_confirm: "å‰Šé™¤ã—ã¾ã™ã‹?" }, status: :see_other, class: "btn btn-outline-danger col-3" %>
      </div>
    </div>
  <% end %>
</div>